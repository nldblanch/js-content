<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academy Associates</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" />
    </noscript>
    <style>
        :root {
            --primary-color: #00c7c3;
            --primary-dark: #062832;
            --text-light: #666;
            --white: #ffffff;
            --background: #ffffff;
            --error-color: #e74c3c;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            background: var(--primary-color);
            opacity: 0.3;
            animation: float 15s infinite ease-in-out;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            25% {
                transform: translateY(-100px) translateX(50px);
            }

            50% {
                transform: translateY(-200px) translateX(-30px);
            }

            75% {
                transform: translateY(-100px) translateX(-50px);
            }
        }
    </style>
</head>

<body class="is-preload">
    <div class="particles" id="particles"></div>
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <div class="inner">

                <!-- Logo -->
                <a href="index.html" class="logo">
                    <span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">Digital Skills Academy</span>
                </a>

            </div>
        </header>

        <div id="main">
            <div class="inner">
                <header>
                    <h1>ðŸŽ“ Academy Associates</h1>
                    <p>Welcome to our community of learners! Here is a list of everyone who has contributed to this <strong>&nbsp;js-content&nbsp;</strong> repository.</p>
                </header>

                <!-- Table -->
                <section id="contributors">
                    <h2>Top Contributors</h2>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Contribution</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="contributors-table">
                            </tbody>
                        </table>
                    </div>
                </section>
                <section class="tiles" id="associates-container">
                </section>
            </div>
        </div>

        <!-- Footer -->
        <footer id="footer">
            <div class="inner">

                <section>
                    <h2>Want to add your name?</h2>
                    <a href="https://github.com/nldblanch/js-content/tree/main/docs" target="_blank">
                        <button>Pull Request Guide</button>
                    </a>
                </section>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="commits.js"></script>
    <script src="associates.js"></script>
    <script>
        // Create particle effects
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 30;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';

                // Random size between 5px and 20px
                const size = Math.random() * 15 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;

                // Random starting position
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;

                // Random animation delay and duration
                particle.style.animationDelay = `${Math.random() * 15}s`;
                particle.style.animationDuration = `${Math.random() * 10 + 10}s`;

                particlesContainer.appendChild(particle);
            }
        }

        function getInitials(name) {
            return name
                .split(' ')
                .map(word => word.charAt(0).toUpperCase())
                .join('');
        }

        function createAssociateCard(associate, index) {
            const card = document.createElement('article');
            card.className = `style${index + 1}`;
            const githubLink = associate.github ? associate.github.includes('github') ? associate.github : `https://github.com/${associate.github}` : '#'
            const target = githubLink === '#' ? '' : "_blank"
            card.innerHTML = `
                    <span class="image">
                            <img src="images/pic0${index + 1}.jpg" alt="" />
                        </span>
                        <a href="${githubLink ?? '#'}" target="${target}">
                            <h2>${associate.name}</h2>
                            <p>${associate.academy}</p>
                            <div class="content">
                                <p>${associate.tip}</p>
                            </div>
                        </a>
                `;

            return card;
        }

        function createContributors() {
            const contributorsTable = document.getElementById('contributors-table');

            // Sort associates by contributions (descending)
            const topContributors = Object.entries(commitStats)
                .filter(([_, contributions]) => contributions > 1) // minimum 2 contributions
                .sort(([, a], [, b]) => b - a)
                .slice(0, 3) // Top 3
                .map(([name, contributions]) => ({
                    name, contributions
                }))
            // Calculate total contributions for percentage
            const totalContributions = topContributors.reduce((sum, a) => sum + a.contributions, 0);

            topContributors.forEach((associate, index) => {
                const item = document.createElement('tr');
                item.className = 'contributors-item';

                const percentage = ((associate.contributions / totalContributions) * 100).toFixed(1);

                item.innerHTML = `
					<td><strong>${associate.name}</strong></td>
					<td><strong>${associate.contributions}</strong></td>
                    <td><strong>${percentage}%</strong></td>
                      
                    `;

                contributorsTable.appendChild(item);
            });

            // Hide contributors if no contributors
            if (topContributors.length === 0) {
                document.getElementById('contributors').style.display = 'none';
            }
        }

        function loadAssociates() {
            const container = document.getElementById('associates-container');

            try {
                container.innerHTML = '';
                const associatesLength = associates.find(a => a.name.match(/your name/i)) ? associates.length - 1 : associates.length;

                associates.forEach((associate, index) => {
                    const card = createAssociateCard(associate, index);
                    container.appendChild(card);
                });

            } catch (error) {
                container.className = 'error';
                container.innerHTML = `
                    <h2>Oops! Something went wrong</h2>
                    <p>${error.message}</p>
                `;
                countBadge.style.display = 'none';
            }
        }

        // Initialize particles, contributors, and load associates
        createParticles();
        createContributors();
        loadAssociates();
    </script>
</body>

</html>
